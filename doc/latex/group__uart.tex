\hypertarget{group__uart}{\section{U\-A\-R\-T}
\label{group__uart}\index{U\-A\-R\-T@{U\-A\-R\-T}}
}


This is the driver for the U\-A\-R\-T0/2/3.  


\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}{rflpc\-\_\-uart\-\_\-t} \{ \\*
\hyperlink{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caa7203ffec58658c5e01ace4b2b7f22678}{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T0} =  0, 
\\*
\hyperlink{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caaa7f5b040eb95433e2ef8c7810a6f1906}{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T2} =  2, 
\\*
\hyperlink{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caa644eb34704020acd151df073f0040917}{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T3} =  3
 \}
\begin{DoxyCompactList}\small\item\em Constants that represents the U\-A\-R\-T port you want to use in uart driver functions. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \hyperlink{group__uart_ga1e5fb400995bca1ce174ee38f0b538b1}{rflpc\-\_\-uart\-\_\-init} (\hyperlink{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}{rflpc\-\_\-uart\-\_\-t} uart\-\_\-num)
\begin{DoxyCompactList}\small\item\em Inits the U\-A\-R\-T e, using 11520 baud, 8 bits data, no parity and 1 stop bit. \end{DoxyCompactList}\item 
void \hyperlink{group__uart_gad350726760ac1e9064a0e90e99bef65f}{rflpc\-\_\-uart\-\_\-putchar} (\hyperlink{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}{rflpc\-\_\-uart\-\_\-t} uart\-\_\-num, char c)
\begin{DoxyCompactList}\small\item\em Sends a byte to the uart. \end{DoxyCompactList}\item 
int \hyperlink{group__uart_gafd482b513bca251e0226cc22a202c808}{rflpc\-\_\-uart\-\_\-byte\-\_\-available} (\hyperlink{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}{rflpc\-\_\-uart\-\_\-t} uart\-\_\-num)
\begin{DoxyCompactList}\small\item\em Test the reception F\-I\-F\-O. \end{DoxyCompactList}\item 
char \hyperlink{group__uart_ga7a84e7eb041ac05833c8b4d87fbf6f3e}{rflpc\-\_\-uart\-\_\-getchar} (\hyperlink{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}{rflpc\-\_\-uart\-\_\-t} uart\-\_\-num)
\begin{DoxyCompactList}\small\item\em Gets a character from the uart. \end{DoxyCompactList}\item 
void \hyperlink{group__uart_gaa5113c8db7526435ee9f25726a7bdcaa}{rflpc\-\_\-uart\-\_\-set\-\_\-rx\-\_\-callback} (\hyperlink{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}{rflpc\-\_\-uart\-\_\-t} uart\-\_\-num, \hyperlink{group__irq_ga4970a8a2cf9b63e4c261982504669a1f}{rflpc\-\_\-irq\-\_\-handler\-\_\-t} callback)
\begin{DoxyCompactList}\small\item\em Sets the uart rx callback. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
This is the driver for the U\-A\-R\-T0/2/3. At the moment, this driver is only usable when the C\-P\-U is clocked at 96\-Mhz and the U\-A\-R\-T mode is set to
\begin{DoxyItemize}
\item 115200 bauds
\item 8 bits data
\item no parity check
\item 1 stop bit \begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000003}{Todo}]Allow fine configuration for the U\-A\-R\-T. Just have to calculate divider and multiplier depending on cpu clock and desired speed.\end{DoxyRefDesc}

\end{DoxyItemize}

\subsection{Enumeration Type Documentation}
\hypertarget{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}{\index{U\-A\-R\-T@{U\-A\-R\-T}!rflpc\-\_\-uart\-\_\-t@{rflpc\-\_\-uart\-\_\-t}}
\index{rflpc\-\_\-uart\-\_\-t@{rflpc\-\_\-uart\-\_\-t}!UART@{U\-A\-R\-T}}
\subsubsection[{rflpc\-\_\-uart\-\_\-t}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf rflpc\-\_\-uart\-\_\-t}}}\label{group__uart_gab5996edf55ac7654ec4040e6aedaa7ca}


Constants that represents the U\-A\-R\-T port you want to use in uart driver functions. 

\begin{Desc}
\item[Enumerator\-: ]\par
\begin{description}
\index{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T0@{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T0}!U\-A\-R\-T@{U\-A\-R\-T}}\index{U\-A\-R\-T@{U\-A\-R\-T}!R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T0@{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T0}}\item[{\em 
\hypertarget{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caa7203ffec58658c5e01ace4b2b7f22678}{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T0}\label{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caa7203ffec58658c5e01ace4b2b7f22678}
}]Use U\-A\-R\-T0. \index{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T2@{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T2}!U\-A\-R\-T@{U\-A\-R\-T}}\index{U\-A\-R\-T@{U\-A\-R\-T}!R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T2@{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T2}}\item[{\em 
\hypertarget{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caaa7f5b040eb95433e2ef8c7810a6f1906}{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T2}\label{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caaa7f5b040eb95433e2ef8c7810a6f1906}
}]Use U\-A\-R\-T2. \index{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T3@{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T3}!U\-A\-R\-T@{U\-A\-R\-T}}\index{U\-A\-R\-T@{U\-A\-R\-T}!R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T3@{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T3}}\item[{\em 
\hypertarget{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caa644eb34704020acd151df073f0040917}{R\-F\-L\-P\-C\-\_\-\-U\-A\-R\-T3}\label{group__uart_ggab5996edf55ac7654ec4040e6aedaa7caa644eb34704020acd151df073f0040917}
}]Use U\-A\-R\-T3. \end{description}
\end{Desc}



Definition at line 45 of file uart.\-h.



\subsection{Function Documentation}
\hypertarget{group__uart_gafd482b513bca251e0226cc22a202c808}{\index{U\-A\-R\-T@{U\-A\-R\-T}!rflpc\-\_\-uart\-\_\-byte\-\_\-available@{rflpc\-\_\-uart\-\_\-byte\-\_\-available}}
\index{rflpc\-\_\-uart\-\_\-byte\-\_\-available@{rflpc\-\_\-uart\-\_\-byte\-\_\-available}!UART@{U\-A\-R\-T}}
\subsubsection[{rflpc\-\_\-uart\-\_\-byte\-\_\-available}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf rflpc\-\_\-uart\-\_\-byte\-\_\-available} (
\begin{DoxyParamCaption}
\item[{{\bf rflpc\-\_\-uart\-\_\-t}}]{uart\-\_\-num}
\end{DoxyParamCaption}
)}}\label{group__uart_gafd482b513bca251e0226cc22a202c808}


Test the reception F\-I\-F\-O. 


\begin{DoxyParams}{Parameters}
{\em uart\-\_\-num} & the uart to use \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
true if a byte is available 
\end{DoxyReturn}
\hypertarget{group__uart_ga7a84e7eb041ac05833c8b4d87fbf6f3e}{\index{U\-A\-R\-T@{U\-A\-R\-T}!rflpc\-\_\-uart\-\_\-getchar@{rflpc\-\_\-uart\-\_\-getchar}}
\index{rflpc\-\_\-uart\-\_\-getchar@{rflpc\-\_\-uart\-\_\-getchar}!UART@{U\-A\-R\-T}}
\subsubsection[{rflpc\-\_\-uart\-\_\-getchar}]{\setlength{\rightskip}{0pt plus 5cm}char {\bf rflpc\-\_\-uart\-\_\-getchar} (
\begin{DoxyParamCaption}
\item[{{\bf rflpc\-\_\-uart\-\_\-t}}]{uart\-\_\-num}
\end{DoxyParamCaption}
)}}\label{group__uart_ga7a84e7eb041ac05833c8b4d87fbf6f3e}


Gets a character from the uart. 


\begin{DoxyParams}{Parameters}
{\em uart\-\_\-num} & the uart to use \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
the character read. 
\end{DoxyReturn}
\begin{DoxyWarning}{Warning}
This function loops while no data is available! 
\end{DoxyWarning}
\hypertarget{group__uart_ga1e5fb400995bca1ce174ee38f0b538b1}{\index{U\-A\-R\-T@{U\-A\-R\-T}!rflpc\-\_\-uart\-\_\-init@{rflpc\-\_\-uart\-\_\-init}}
\index{rflpc\-\_\-uart\-\_\-init@{rflpc\-\_\-uart\-\_\-init}!UART@{U\-A\-R\-T}}
\subsubsection[{rflpc\-\_\-uart\-\_\-init}]{\setlength{\rightskip}{0pt plus 5cm}int {\bf rflpc\-\_\-uart\-\_\-init} (
\begin{DoxyParamCaption}
\item[{{\bf rflpc\-\_\-uart\-\_\-t}}]{uart\-\_\-num}
\end{DoxyParamCaption}
)}}\label{group__uart_ga1e5fb400995bca1ce174ee38f0b538b1}


Inits the U\-A\-R\-T e, using 11520 baud, 8 bits data, no parity and 1 stop bit. 

\begin{DoxyReturn}{Returns}
0 if init is successful, -\/1 otherwise 
\end{DoxyReturn}
\begin{DoxyNote}{Note}
at the moment, -\/1 is returned if the C\-P\-U is not clocked at 96\-Mhz 
\end{DoxyNote}
\hypertarget{group__uart_gad350726760ac1e9064a0e90e99bef65f}{\index{U\-A\-R\-T@{U\-A\-R\-T}!rflpc\-\_\-uart\-\_\-putchar@{rflpc\-\_\-uart\-\_\-putchar}}
\index{rflpc\-\_\-uart\-\_\-putchar@{rflpc\-\_\-uart\-\_\-putchar}!UART@{U\-A\-R\-T}}
\subsubsection[{rflpc\-\_\-uart\-\_\-putchar}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf rflpc\-\_\-uart\-\_\-putchar} (
\begin{DoxyParamCaption}
\item[{{\bf rflpc\-\_\-uart\-\_\-t}}]{uart\-\_\-num, }
\item[{char}]{c}
\end{DoxyParamCaption}
)}}\label{group__uart_gad350726760ac1e9064a0e90e99bef65f}


Sends a byte to the uart. 


\begin{DoxyParams}{Parameters}
{\em uart\-\_\-num} & the uart to use \\
\hline
{\em c} & character to send \\
\hline
\end{DoxyParams}
\hypertarget{group__uart_gaa5113c8db7526435ee9f25726a7bdcaa}{\index{U\-A\-R\-T@{U\-A\-R\-T}!rflpc\-\_\-uart\-\_\-set\-\_\-rx\-\_\-callback@{rflpc\-\_\-uart\-\_\-set\-\_\-rx\-\_\-callback}}
\index{rflpc\-\_\-uart\-\_\-set\-\_\-rx\-\_\-callback@{rflpc\-\_\-uart\-\_\-set\-\_\-rx\-\_\-callback}!UART@{U\-A\-R\-T}}
\subsubsection[{rflpc\-\_\-uart\-\_\-set\-\_\-rx\-\_\-callback}]{\setlength{\rightskip}{0pt plus 5cm}void {\bf rflpc\-\_\-uart\-\_\-set\-\_\-rx\-\_\-callback} (
\begin{DoxyParamCaption}
\item[{{\bf rflpc\-\_\-uart\-\_\-t}}]{uart\-\_\-num, }
\item[{{\bf rflpc\-\_\-irq\-\_\-handler\-\_\-t}}]{callback}
\end{DoxyParamCaption}
)}}\label{group__uart_gaa5113c8db7526435ee9f25726a7bdcaa}


Sets the uart rx callback. 

This enables the uart0 interrupt and set the handler accordingly 
\begin{DoxyParams}{Parameters}
{\em uart\-\_\-num} & the uart to use \\
\hline
{\em callback} & a pointer to a \hyperlink{group__irq_ga4970a8a2cf9b63e4c261982504669a1f}{rflpc\-\_\-irq\-\_\-handler\-\_\-t} function \\
\hline
\end{DoxyParams}
